<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">

<meta name="description" content="From my understaning Ubuntu will setup a bridge by default when you install lxc. Or perhaps when you first create a container. I&rsquo;m not certain. This isn&rsquo;t the case in a lot of other distributions however.
In this guide we&rsquo;ll setup a network bridge. The bridge with be setup on the host system to aggregate the internal container networks with the outer network. In this way the host system will become a bridge from the router to the containers.">

<meta property="og:title" content="Setting up LXC with Networking" />
<meta property="og:description" content="From my understaning Ubuntu will setup a bridge by default when you install lxc. Or perhaps when you first create a container. I&rsquo;m not certain. This isn&rsquo;t the case in a lot of other distributions however.
In this guide we&rsquo;ll setup a network bridge. The bridge with be setup on the host system to aggregate the internal container networks with the outer network. In this way the host system will become a bridge from the router to the containers." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.bassamsaeed.ca/blog/lxc-container-networking/" />



<meta property="article:published_time" content="2016-05-14T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2016-05-14T00:00:00&#43;00:00"/>












<title>


     Setting up LXC with Networking 

</title>
<link rel="canonical" href="https://www.bassamsaeed.ca/blog/lxc-container-networking/">










<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/pygments.css">
    <link rel="stylesheet" href="/css/main.css">
    




<link rel="shortcut icon"

    href="/img/favicon.ico"

>








</head>


<body lang="">

<section class="header">
    <div class="container">
        <div class="content">
            
            <a href="/"><div class="name"></div></a>
            
            <nav>
                <ul>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        

        

        

        

        

        

        
            
        

        

        

        
            <a href="https://www.bassamsaeed.ca/index.xml"><img class="icon" src="/img/rss.svg" alt="rss" /></a>
        
        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    Setting up LXC with Networking

</div>

                    <div class="initials"><a href="https://www.bassamsaeed.ca/"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Sat May 14 2016 00:00:00 UTC'>May 14, 2016</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>2 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                <p>From my understaning Ubuntu will setup a bridge by default when you install lxc. Or perhaps when you first create a container. I&rsquo;m not certain. This isn&rsquo;t the case in a lot of other distributions however.</p>

<p>In this guide we&rsquo;ll setup a network bridge. The bridge with be setup on the host system to aggregate the internal container networks with the outer network. In this way the host system will become a bridge from the router to the containers.</p>

<p>First create the virtual link and bring it up.</p>

<pre><code>ip link add name *bridge_name* type bridge
ip link set *bridge_name* up
</code></pre>

<p>Add an interface (presumably the LAN interface) to the bridge.</p>

<pre><code>ip link set *interface* master *bridge_name*
</code></pre>

<p>Get an IP address for the bridge.</p>

<pre><code>dhcpcd *bridge_name*
</code></pre>

<p>Confirm that the host has a proper connection.</p>

<pre><code>ping -c 1 www.bassamsaeed.ca
</code></pre>

<p>If everything is working then the bridge is working perfectly. The next step is to properly set up the containers to use the bridge.</p>

<p>First create the container. Use any preferred template.</p>

<pre><code>lxc-create -n *lxc_name* -t debian
</code></pre>

<p>Edit the config file of the container. This is usually located at <code>/var/lib/lxc/*lxc_name*/config</code>. Add the following two lines:</p>

<pre><code>## network
lxc.network.type = veth
lxc.network.link = *bridge_name*
</code></pre>

<p>This will create an virtual ethernet interface and link it with the bridge.</p>

<p>The guest container is now bridged with the network. DHCP may be configured in the guest container. Static IP may also be configured in the actual container or in the container config file as follows:</p>

<pre><code>lxc.network.ipv4 = 192.168.1.100/24
lxc.network.ipv4.gateway = 192.168.1.1
</code></pre>

                <br>
		<p class="back-to-posts"><a href="/blog/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                
            </div>
            
        </div>
    </div>
</section>









</body>
</html>

