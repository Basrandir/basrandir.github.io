	<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.19" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>Setting up LXC with Networking &middot; Bassam Saeed</title>
  

  
  <link rel="stylesheet" href="http://bassamsaeed.ca/css/poole.css">
  <link rel="stylesheet" href="http://bassamsaeed.ca/css/syntax.css">
  <link rel="stylesheet" href="http://bassamsaeed.ca/css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link href="" rel="alternate" type="application/rss+xml" title="Bassam Saeed" />
</head>

	<body class=" ">
		<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="http://bassamsaeed.ca/"><h1>Bassam Saeed</h1></a>
      <p class="lead">
       Personal Dev Blog 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
    </ul>

    <p>&copy; 2017. All rights reserved. </p>
  </div>
</div>


		<div class="content container">
			<div class="post">
			 	<h1>Setting up LXC with Networking</h1>
			  <span class="post-date">Sat, May 14, 2016</span>
			      <p>From my understaning Ubuntu will setup a bridge by default when you install lxc. Or perhaps when you first create a container. I&rsquo;m not certain. This isn&rsquo;t the case in a lot of other distributions however.</p>

<p>In this guide we&rsquo;ll setup a network bridge. The bridge with be setup on the host system to aggregate the internal container networks with the outer network. In this way the host system will become a bridge from the router to the containers.</p>

<p>First create the virtual link and bring it up.</p>

<pre><code>ip link add name *bridge_name* type bridge
ip link set *bridge_name* up
</code></pre>

<p>Add an interface (presumably the LAN interface) to the bridge.</p>

<pre><code>ip link set *interface* master *bridge_name*
</code></pre>

<p>Get an IP address for the bridge.</p>

<pre><code>dhcpcd *bridge_name*
</code></pre>

<p>Confirm that the host has a proper connection.</p>

<pre><code>ping -c 1 www.bassamsaeed.ca
</code></pre>

<p>If everything is working then the bridge is working perfectly. The next step is to properly set up the containers to use the bridge.</p>

<p>First create the container. Use any preferred template.</p>

<pre><code>lxc-create -n *lxc_name* -t debian
</code></pre>

<p>Edit the config file of the container. This is usually located at <code>/var/lib/lxc/*lxc_name*/config</code>. Add the following two lines:</p>

<pre><code>## network
lxc.network.type = veth
lxc.network.link = *bridge_name*
</code></pre>

<p>This will create an virtual ethernet interface and link it with the bridge.</p>

<p>The guest container is now bridged with the network. DHCP may be configured in the guest container. Static IP may also be configured in the actual container or in the container config file as follows:</p>

<pre><code>lxc.network.ipv4 = 192.168.1.100/24
lxc.network.ipv4.gateway = 192.168.1.1
</code></pre>

			</div>

			
		</div>

  </body>
</html>
